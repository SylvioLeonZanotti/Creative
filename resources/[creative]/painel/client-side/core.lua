-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
local Proxy = module("vrp","lib/Proxy")
vRP = Proxy.getInterface("vRP")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
Bahamas = {}
Tunnel.bindInterface("painel",Bahamas)
vSERVER = Tunnel.getInterface("painel")
-----------------------------------------------------------------------------------------------------------------------------------------
-- OPEN
-----------------------------------------------------------------------------------------------------------------------------------------
function Bahamas.Open(Data,Premium,Price)
	if vSERVER.Verify() then
		SetNuiFocus(true,true)
		SetCursorLocation(0.5,0.5)
		SendNUIMessage({ name = "open", payload = { Data, Legends, Premium, Price } })

		vRP.CreateObjects("amb@code_human_in_bus_passenger_idles@female@tablet@idle_a","idle_a","prop_cs_tablet",49,28422,-0.05,0.0,0.0,0.0,0.0, 0.0)
	end
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- CLOSE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("close",function(Data,Callback)
	SetNuiFocus(false,false)
	vRP.Destroy()

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- INVITE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("invite",function(Data,Callback)
	if MumbleIsConnected() then
		Callback(vSERVER.Invite(Data["user_id"]))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- PROMOTE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("promote",function(Data,Callback)
	if MumbleIsConnected() then
		Callback(vSERVER.Hierarchy(Data["user_id"],"Promote"))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- DEMOTE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("demote",function(Data,Callback)
	if MumbleIsConnected() then
		Callback(vSERVER.Hierarchy(Data["user_id"],"Demote"))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- DEMOTE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("dismiss",function(Data,Callback)
	if MumbleIsConnected() then
		Callback(vSERVER.Dismiss(Data["user_id"]))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- BUY
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("buy",function(Data,Callback)
	if MumbleIsConnected() then
		Callback(vSERVER.Buy())
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- BANK
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("bank",function(Data,Callback)
	Callback(vSERVER.Transactions())
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- DEPOSIT
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("deposit",function(Data,Callback)
	if MumbleIsConnected() then
		Callback(vSERVER.Deposit(Data["value"]))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- WITHDRAW
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("withdraw",function(Data,Callback)
	if MumbleIsConnected() then
		Callback(vSERVER.Withdraw(Data["value"]))
	end
end)