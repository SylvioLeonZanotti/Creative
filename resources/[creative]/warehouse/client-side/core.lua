-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
vSERVER = Tunnel.getInterface("warehouse")
-----------------------------------------------------------------------------------------------------------------------------------------
-- VARIABLES
-----------------------------------------------------------------------------------------------------------------------------------------
local Blips = {}
local Warehouse = ""
-----------------------------------------------------------------------------------------------------------------------------------------
-- LIST
-----------------------------------------------------------------------------------------------------------------------------------------
local List = {
	["1"] = {-73.22,-1196.77,28.04,3.0},
	["2"] = {-78.68,-1204.43,27.97,3.0},
	["3"] = {-67.0,-1199.19,28.13,3.0},
	["4"] = {-71.27,-1206.54,28.19,3.0},
	["5"] = {-61.39,-1204.81,28.49,3.0},
	["6"] = {-65.98,-1211.89,28.68,3.0},
	["7"] = {-56.07,-1210.14,28.91,3.0},
	["8"] = {-52.67,-1216.35,29.05,3.0},
	["9"] = {-56.33,-1229.24,29.14,3.0},
	["10"] = {-66.91,-1226.51,29.21,3.0},
	["11"] = {-60.68,-1233.92,29.39,3.0},
	["12"] = {-72.63,-1233.64,29.26,3.0},
	["13"] = {-65.89,-1239.52,29.41,3.0},
	["14"] = {-73.68,-1243.3,29.41,3.0},
	["15"] = {-44.24,-1235.62,29.56,3.0},
	["16"] = {-44.24,-1241.99,29.66,3.0},
	["17"] = {-44.24,-1252.43,29.5,3.0},
	["18"] = {-173.66,-1266.16,33.03,3.0},
	["19"] = {-193.95,-1284.36,31.78,3.0},
	["20"] = {-193.95,-1290.25,31.67,3.0},
	["21"] = {-151.93,-1302.82,31.73,3.0},
	["22"] = {903.21,3585.91,33.69,3.0},
	["23"] = {914.43,3562.7,34.03,3.0},
	["24"] = {914.41,3567.32,34.07,3.0},
	["25"] = {433.65,3572.82,33.56,3.0},
	["26"] = {379.73,3583.41,33.63,3.0},
	["27"] = {185.8,2786.48,46.36,3.0},
	["28"] = {641.81,2791.68,42.41,3.0},
	["29"] = {619.13,2784.21,43.8,3.0},
	["30"] = {588.43,2782.03,43.8,3.0},
	["31"] = {583.3,2781.66,43.8,3.0},
	["32"] = {1695.75,6431.22,33.05,3.0},
	["33"] = {178.55,6391.83,32.03,3.0},
	["34"] = {175.07,6398.44,32.19,3.0},
	["35"] = {147.24,6366.87,31.98,3.0},
	["36"] = {108.69,6326.42,31.79,3.0},
	["37"] = {96.68,6329.3,31.88,3.0},
	["38"] = {93.78,6335.18,31.87,3.0},
	["39"] = {-246.44,6068.8,32.73,3.0},
	["40"] = {-161.67,6189.07,31.71,3.0},
	["41"] = {44.29,6304.33,31.63,3.0},
	["42"] = {-353.83,6066.04,31.66,3.0},
	["43"] = {-273.71,6147.9,31.59,3.0},
	["44"] = {-214.8,6250.35,31.61,3.0},
	["45"] = {-218.83,6246.34,31.69,3.0},
	["46"] = {-236.9,6228.29,31.65,3.0},
	["47"] = {-192.36,6266.37,31.73,3.0},
	["48"] = {-199.14,6260.43,31.75,3.0},
	["49"] = {-51.77,6395.36,31.75,3.0},
	["50"] = {31.03,6448.01,31.62,3.0},
	["51"] = {37.67,6454.65,31.61,3.0},
	["52"] = {44.26,6461.24,31.71,3.0},
	["53"] = {55.45,6472.43,31.62,3.0},
	["54"] = {57.01,6479.79,31.7,3.0},
	["55"] = {5.05,6465.64,31.53,3.0},
	["56"] = {-5.57,6490.69,31.58,3.0},
	["57"] = {-26.73,6461.94,31.67,3.0},
	["58"] = {-42.3,6417.63,31.72,3.0},
	["59"] = {-35.58,6424.36,31.64,3.0},
	["60"] = {-58.68,6502.11,31.57,3.0},
	["61"] = {-84.6,6498.26,31.7,3.0},
	["62"] = {-92.22,6469.76,31.7,3.0},
	["63"] = {-437.56,6148.08,31.72,3.0},
	["64"] = {-427.96,6161.7,31.74,3.0},
	["65"] = {-1128.43,2691.44,18.89,3.0},
	["66"] = {2704.04,3457.89,55.79,3.0},
	["67"] = {2695.52,3461.45,56.43,3.0},
	["68"] = {2685.94,3465.45,56.41,3.0},
	["69"] = {2682.54,3507.37,53.54,3.0},
	["70"] = {637.2,250.84,103.39,3.0},
	["71"] = {639.39,254.62,103.4,3.0},
	["72"] = {335.73,360.64,106.9,3.0},
	["73"] = {323.26,363.72,105.57,3.0},
	["74"] = {307.28,359.58,105.59,3.0},
	["75"] = {299.97,361.35,105.7,3.0},
	["76"] = {231.04,381.6,106.59,3.0},
	["77"] = {237.12,379.49,106.39,3.0},
	["78"] = {252.33,373.93,105.57,3.0},
	["79"] = {168.82,307.92,112.53,3.0},
	["80"] = {177.87,309.07,105.38,3.0},
	["81"] = {197.6,306.66,105.64,3.0},
	["82"] = {287.82,310.74,105.84,3.0},
	["83"] = {353.13,329.49,104.33,3.0},
	["84"] = {356.56,328.55,104.19,3.0},
	["85"] = {141.91,-379.83,43.84,3.0},
	["86"] = {74.58,-351.57,42.99,3.0},
	["87"] = {1.5,-437.17,40.11,3.0},
	["88"] = {-413.83,-2699.82,6.57,3.0},
	["89"] = {-416.75,-2762.84,6.58,3.0},
	["90"] = {-457.2,-2753.8,6.59,3.0},
	["91"] = {-214.18,-2536.38,6.59,3.0},
	["92"] = {-219.99,-2456.81,6.62,3.0},
	["93"] = {-164.98,-2464.98,6.64,3.0},
	["94"] = {-34.77,-2553.1,6.66,3.0},
	["95"] = {-20.18,-2640.26,6.66,3.0},
	["96"] = {42.44,-2633.32,6.65,3.0},
	["97"] = {-174.4,-2581.27,6.58,3.0},
	["98"] = {262.95,-2506.91,6.93,3.0},
	["99"] = {348.74,-2651.6,6.72,3.0},
	["100"] = {528.85,-2731.95,6.67,3.0},
	["101"] = {567.81,-2754.45,6.69,3.0},
	["102"] = {1685.74,-1680.03,113.15,3.0},
	["103"] = {684.65,-2742.02,6.64,3.0},
	["104"] = {806.16,-3183.39,6.53,3.0},
	["105"] = {917.5,-3240.26,6.53,3.0},
	["106"] = {485.4,-3383.96,6.68,3.0},
	["107"] = {467.5,-3205.72,6.68,3.0},
	["108"] = {467.5,-3205.72,10.0,3.0},
	["109"] = {503.68,-3120.88,10.0,3.0},
	["110"] = {503.69,-3120.88,6.67,3.0},
	["111"] = {630.18,-2999.04,6.5,3.0},
	["112"] = {163.09,-3337.07,6.57,3.0},
	["113"] = {283.25,-2859.33,6.53,3.0},
	["114"] = {236.03,-3111.69,6.38,3.0},
	["115"] = {305.5,-3121.48,6.42,3.0},
	["116"] = {268.82,-3248.59,6.41,3.0},
	["117"] = {557.01,-2328.27,6.44,3.0},
	["118"] = {-1962.75,-3032.8,14.55,3.0},
	["119"] = {-1922.68,-2963.08,14.53,3.0},
	["120"] = {-861.34,-2708.52,14.42,3.0},
	["121"] = {-808.74,-2756.78,14.61,3.0},
	["122"] = {-1875.77,-2983.21,14.59,3.0},
	["123"] = {-1093.63,-2403.03,14.6,3.0},
	["124"] = {-630.11,-2350.43,14.44,3.0},
	["125"] = {-775.44,-2632.05,14.58,3.0},
	["126"] = {-729.89,-2535.11,14.43,3.0},
	["127"] = {-1108.7,-3431.62,14.55,3.0},
	["128"] = {-1154.63,-3530.73,14.42,3.0},
	["129"] = {-1697.0,-3180.83,14.56,3.0},
	["130"] = {-1549.99,-3268.85,14.53,3.0},
	["131"] = {-1499.72,-3286.45,14.53,3.0},
	["132"] = {-1450.06,-3272.06,14.54,3.0},
	["133"] = {-1442.42,-3305.0,14.54,3.0},
	["134"] = {-1412.51,-3346.55,14.56,3.0},
	["135"] = {-1380.5,-3379.12,14.56,3.0},
	["136"] = {-939.68,159.23,66.63,3.0},
	["137"] = {-976.17,389.33,75.36,3.0},
	["138"] = {-471.24,-864.37,24.34,3.0},
	["139"] = {-514.4,-1019.39,24.07,3.0},
	["140"] = {-513.99,-1039.1,23.86,3.0},
	["141"] = {-509.12,-1001.62,24.05,3.0},
	["142"] = {-580.04,-1589.49,27.38,3.0},
	["143"] = {-653.0,-1753.2,25.29,3.0},
	["144"] = {-657.99,-1705.43,25.48,3.0},
	["145"] = {903.84,-1576.77,31.43,3.0},
	["146"] = {984.02,-1531.26,31.44,3.0},
	["147"] = {1074.79,-2450.86,29.71,3.0},
	["148"] = {1116.72,-2383.28,31.33,3.0},
	["149"] = {967.28,-2251.47,31.15,3.0},
	["150"] = {801.15,-2116.89,29.98,3.0},
	["151"] = {729.07,-1974.09,29.89,3.0},
	["152"] = {966.14,-1933.5,31.68,3.0},
	["153"] = {1062.33,-1847.75,37.9,3.0},
	["154"] = {1236.69,-1928.55,39.11,3.0},
	["155"] = {1138.61,-2046.21,31.63,3.0},
	["156"] = {1141.22,-2141.71,31.58,3.0},
	["157"] = {1171.8,-2267.07,31.07,3.0},
	["158"] = {742.69,1312.89,360.49,3.0},
	["159"] = {-380.65,405.09,110.72,3.0},
	["160"] = {-841.95,5400.91,35.19,3.0},
	["161"] = {-468.03,5357.32,81.38,3.0},
	["162"] = {-489.7,5326.92,81.06,3.0},
	["163"] = {-567.08,5252.97,71.08,3.0},
	["164"] = {35.79,6548.94,32.07,3.0},
	["165"] = {121.81,6405.49,31.88,3.0},
	["166"] = {2832.87,4572.18,47.19,3.0},
	["167"] = {2916.63,4367.83,51.02,3.0},
	["168"] = {304.9,2820.58,43.87,3.0},
	["169"] = {597.52,2928.63,41.46,3.0},
	["170"] = {2669.93,1612.75,24.97,3.0},
	["171"] = {2669.93,1600.67,25.0,3.0},
	["172"] = {2748.39,1454.11,25.1,3.0},
	["173"] = {2601.11,2804.73,34.34,3.0},
	["174"] = {2569.17,2720.66,43.53,3.0},
	["175"] = {2663.63,2890.95,37.47,3.0},
	["176"] = {2832.87,2800.02,58.0,3.0},
	["177"] = {2746.34,2787.67,36.02,3.0},
	["178"] = {2707.58,2776.49,38.36,3.0},
	["179"] = {-229.36,-1117.95,23.61,3.0},
	["180"] = {-169.18,-1026.67,27.85,3.0},
	["181"] = {-96.98,-1013.21,27.88,3.0},
	["182"] = {23.38,-619.61,35.58,3.0},
	["183"] = {23.4,-619.59,32.2,3.0},
	["184"] = {491.34,-507.02,28.76,3.0},
	["185"] = {491.33,-507.01,25.38,3.0},
	["186"] = {569.99,-401.86,25.29,3.0},
	["187"] = {511.52,-1074.93,29.3,3.0},
	["188"] = {510.59,-1013.78,28.5,3.0},
	["189"] = {704.66,-1545.38,10.2,3.0},
	["190"] = {690.09,-1555.92,10.36,3.0},
	["191"] = {971.05,-1143.69,25.78,3.0},
	["192"] = {940.96,-1171.46,26.45,3.0},
	["193"] = {-1283.27,-3341.79,14.59,3.0},
	["194"] = {-1299.9,-3408.15,14.6,3.0},
	["195"] = {-1747.4,-2790.21,14.55,3.0},
	["196"] = {-1754.3,-2799.47,14.54,3.0},
	["197"] = {-1767.52,-2822.36,14.55,3.0},
	["198"] = {-964.72,-2834.69,14.49,3.0},
	["199"] = {-1244.82,-2098.7,14.55,3.0},
	["200"] = {-304.05,-1179.79,23.97,3.0},
	["201"] = {-350.34,-1570.06,25.88,3.0},
	["202"] = {-355.15,-1513.05,28.36,3.0},
	["203"] = {597.32,-1880.25,25.65,3.0},
	["204"] = {535.84,-1868.45,25.98,3.0},
	["205"] = {427.67,-1965.33,23.96,3.0},
	["206"] = {849.03,2383.96,54.77,3.0},
	["207"] = {823.96,2365.27,52.88,3.0},
	["208"] = {1218.15,2398.52,66.68,3.0},
	["209"] = {1128.63,2125.25,56.13,3.0},
	["210"] = {-2015.75,559.15,108.96,3.0},
	["211"] = {2473.83,1571.75,33.37,3.0},
	["212"] = {1431.7,-1682.75,65.2,3.0},
	["213"] = {1430.15,-2317.23,67.51,3.0},
	["214"] = {1620.63,-2259.33,107.1,3.0},
	["215"] = {1623.14,-2363.44,93.83,3.0},
	["216"] = {1499.53,-2518.84,56.44,3.0},
	["217"] = {1348.33,-2134.05,55.6,3.0},
	["218"] = {1890.12,-1019.19,79.06,3.0},
	["219"] = {1577.64,-1685.8,88.79,3.0},
	["220"] = {1622.56,-1879.28,104.96,3.0},
	["221"] = {1515.62,-2137.04,77.27,3.0},
	["222"] = {1519.15,-1752.31,79.29,3.0},
	["223"] = {-1717.95,2954.65,33.44,3.0},
	["224"] = {-1735.11,2962.85,33.44,3.0},
	["225"] = {-1776.78,2973.94,33.44,3.0},
	["226"] = {-2385.41,3298.9,33.56,3.0},
	["227"] = {-2389.6,3286.8,33.6,3.0},
	["228"] = {-2173.06,3256.12,33.46,3.0},
	["229"] = {-2007.05,3407.1,31.9,3.0}
}
-----------------------------------------------------------------------------------------------------------------------------------------
-- THREADSTART
-----------------------------------------------------------------------------------------------------------------------------------------
CreateThread(function()
	for k,v in pairs(List) do
		exports["target"]:AddCircleZone("Warehouse:"..k,vec3(v[1],v[2],v[3]),v[4],{
			name = "Warehouse:"..k,
			heading = 3374176
		},{
			shop = k,
			Distance = 1.5,
			options = {
				{
					event = "warehouse:openSystem",
					label = "Abrir",
					tunnel = "shop"
				},{
					event = "warehouse:Upgrade",
					label = "Aumentar",
					tunnel = "server"
				},{
					event = "warehouse:Password",
					label = "Trocar Senha",
					tunnel = "server"
				}
			}
		})
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- WAREHOUSE:OPENSYSTEM
-----------------------------------------------------------------------------------------------------------------------------------------
AddEventHandler("warehouse:openSystem",function(Number)
	if LocalPlayer["state"]["Route"] < 900000 then
		if vSERVER.Warehouse(Number) then
			Warehouse = Number
			SetNuiFocus(true,true)
			SendNUIMessage({ action = "showMenu" })
		end
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- WAREHOUSECLOSE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("invClose",function(Data,Callback)
	SendNUIMessage({ action = "hideMenu" })
	SetNuiFocus(false,false)
	Warehouse = ""

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- TAKEITEM
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("takeItem",function(Data,Callback)
	vSERVER.takeItem(Data["item"],Data["slot"],Data["amount"],Data["target"],Warehouse)

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- STOREITEM
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("storeItem",function(Data,Callback)
	vSERVER.storeItem(Data["item"],Data["slot"],Data["amount"],Data["target"],Warehouse)

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- UPDATESLOT
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("updateWarehouse",function(Data,Callback)
	vSERVER.updateWarehouse(Data["slot"],Data["target"],Data["amount"],Warehouse)

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REQUESTWAREHOUSE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("requestWarehouse",function(Data,Callback)
	local myInventory,myWarehouse,invPeso,invMaxpeso,warehousePeso,warehouseMaxpeso = vSERVER.openWarehouse(Warehouse)
	if myInventory then
		Callback({ myInventory = myInventory, myWarehouse = myWarehouse, invPeso = invPeso, invMaxpeso = invMaxpeso, warehousePeso = warehousePeso, warehouseMaxpeso = warehouseMaxpeso })
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- WAREHOUSE:UPDATE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent("warehouse:Update")
AddEventHandler("warehouse:Update",function(Action)
	SendNUIMessage({ action = Action })
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- WAREHOUSE:WEIGHT
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent("warehouse:Weight")
AddEventHandler("warehouse:Weight",function(invPeso,invMaxpeso,warehousePeso,warehouseMaxpeso)
	SendNUIMessage({ action = "updateWeight", invPeso = invPeso, invMaxpeso = invMaxpeso, warehousePeso = warehousePeso, warehouseMaxpeso = warehouseMaxpeso })
end)